

<div class="property-detail">
  <div class="row">
    <div class="col-lg-8">
      <div class="property-header mb-4">
        <div class="property-images mb-4">
          <% if (property.images && property.images.length) { %>
            <div class="main-image">
              <img src="<%= property.images[0] %>" class="img-fluid rounded" alt="<%= property.title %>">
            </div>
          <% } else { %>
            <div class="placeholder-main-image d-flex align-items-center justify-content-center rounded">
              <i class="fas fa-home fa-5x text-muted"></i>
            </div>
          <% } %>
        </div>
        
        <div class="property-info">
          <h1 class="property-title">
            <i class="fas fa-home me-3"></i><%= property.title %>
          </h1>
          
          <div class="location-info mb-3">
            <i class="fas fa-map-marker-alt text-primary me-2"></i>
            <span class="location-text"><%= property.location %></span>
          </div>
          
          <div class="price-info mb-4">
            <span class="price-amount">$<%= property.price %></span>
            <span class="price-period">/ night</span>
          </div>
          
          <div class="property-description">
            <h4><i class="fas fa-info-circle me-2"></i>Description</h4>
            <p class="description-text"><%= property.description %></p>
          </div>
        </div>
      </div>
    </div>
    
    <div class="col-lg-4">
      <div class="booking-sidebar">
        <div class="card booking-card">
          <div class="card-header">
            <h5 class="mb-0">
              <i class="fas fa-calendar-check me-2"></i>Book Your Stay
            </h5>
          </div>
          <div class="card-body">
            <form method="POST" action="/bookings/<%= property._id %>" class="booking-form">
              <div class="date-selection mb-4">
                <div class="row g-3">
                  <div class="col-12">
                    <label class="form-label fw-semibold">
                      <i class="fas fa-calendar-day me-2"></i>Check-in Date
                    </label>
                    <input type="date" name="checkInDate" class="form-control date-input" required>
                  </div>
                  <div class="col-12">
                    <label class="form-label fw-semibold">
                      <i class="fas fa-calendar-day me-2"></i>Check-out Date
                    </label>
                    <input type="date" name="checkOutDate" class="form-control date-input" required>
                  </div>
                </div>
              </div>
              
              <div class="price-breakdown mb-4">
                <div class="d-flex justify-content-between">
                  <span>Price per night:</span>
                  <span class="fw-semibold">$<%= property.price %></span>
                </div>
                <hr>
                <div class="d-flex justify-content-between total-price">
                  <span class="fw-bold">Total:</span>
                  <span class="fw-bold text-primary">$<span id="totalPrice"><%= property.price %></span></span>
                </div>
              </div>
              
              <button type="submit" class="btn btn-primary btn-book w-100">
                <i class="fas fa-credit-card me-2"></i>Book Now
              </button>
            </form>
          </div>
        </div>
        
        <div class="property-actions mt-4">
          <div class="d-grid gap-2">
            <a href="/properties/<%= property._id %>/edit" class="btn btn-secondary btn-action">
              <i class="fas fa-edit me-2"></i>Edit Property
            </a>
            <form method="POST" action="/properties/<%= property._id %>?_method=DELETE" class="d-inline">
              <button type="submit" class="btn btn-danger btn-action w-100" 
                      onclick="return confirm('Are you sure you want to delete this property?')">
                <i class="fas fa-trash me-2"></i>Delete Property
              </button>
            </form>
          </div>
        </div>
        
        <div class="property-features mt-4">
          <div class="card features-card">
            <div class="card-header">
              <h6 class="mb-0">
                <i class="fas fa-star me-2"></i>Property Features
              </h6>
            </div>
            <div class="card-body">
              <div class="feature-list">
                <div class="feature-item">
                  <i class="fas fa-wifi text-primary me-2"></i>
                  <span>Free WiFi</span>
                </div>
                <div class="feature-item">
                  <i class="fas fa-parking text-primary me-2"></i>
                  <span>Free Parking</span>
                </div>
                <div class="feature-item">
                  <i class="fas fa-swimmer text-primary me-2"></i>
                  <span>Swimming Pool</span>
                </div>
                <div class="feature-item">
                  <i class="fas fa-dumbbell text-primary me-2"></i>
                  <span>Fitness Center</span>
                </div>
                <div class="feature-item">
                  <i class="fas fa-concierge-bell text-primary me-2"></i>
                  <span>Room Service</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .property-detail {
    padding: 2rem 0;
  }
  
  .property-images {
    position: relative;
    border-radius: 25px;
    overflow: hidden;
    box-shadow: 0 15px 35px rgba(0,0,0,0.1);
  }
  
  .main-image img {
    width: 100%;
    height: 400px;
    object-fit: cover;
    border-radius: 25px;
  }
  
  .placeholder-main-image {
    height: 400px;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 25px;
  }
  
  .property-title {
    font-size: 2.5rem;
    font-weight: 700;
    color: #2c3e50;
    margin-bottom: 1rem;
  }
  
  .location-info {
    font-size: 1.2rem;
    color: #6c757d;
    font-weight: 500;
  }
  
  .price-info {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
    padding: 1.5rem 2rem;
    border-radius: 20px;
    text-align: center;
  }
  
  .price-amount {
    font-size: 2.5rem;
    font-weight: 700;
    color: #667eea;
  }
  
  .price-period {
    font-size: 1.2rem;
    color: #6c757d;
    font-weight: 500;
  }
  
  .property-description h4 {
    color: #2c3e50;
    font-weight: 600;
    margin-bottom: 1rem;
  }
  
  .description-text {
    font-size: 1.1rem;
    line-height: 1.6;
    color: #495057;
  }
  
  .booking-sidebar {
    position: sticky;
    top: 100px;
  }
  
  .booking-card {
    background: rgba(255,255,255,0.95);
    backdrop-filter: blur(15px);
    border: none;
    border-radius: 25px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.1);
  }
  
  .booking-card .card-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 25px 25px 0 0;
    padding: 1.5rem;
  }
  
  .booking-card .card-body {
    padding: 2rem;
  }
  
  .date-input {
    border: 2px solid #e9ecef;
    border-radius: 15px;
    padding: 0.75rem 1rem;
    background: rgba(248,249,250,0.8);
    transition: all 0.3s ease;
  }
  
  .date-input:focus {
    border-color: #667eea;
    box-shadow: 0 0 0 0.25rem rgba(102, 126, 234, 0.25);
    background: rgba(255,255,255,0.95);
  }
  
  .price-breakdown {
    background: rgba(248,249,250,0.8);
    padding: 1.5rem;
    border-radius: 15px;
  }
  
  .total-price {
    font-size: 1.2rem;
  }
  
  .btn-book {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    border-radius: 15px;
    padding: 15px 20px;
    font-weight: 600;
    font-size: 1.1rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
  }
  
  .btn-book:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
  }
  
  .btn-action {
    border-radius: 15px;
    padding: 12px 20px;
    font-weight: 500;
    transition: all 0.3s ease;
  }
  
  .btn-action:hover {
    transform: translateY(-2px);
  }
  
  .features-card {
    background: rgba(255,255,255,0.9);
    backdrop-filter: blur(10px);
    border: none;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.08);
  }
  
  .features-card .card-header {
    background: linear-gradient(135deg, rgba(40, 167, 69, 0.1) 0%, rgba(32, 201, 151, 0.1) 100%);
    border: none;
    border-radius: 20px 20px 0 0;
    padding: 1rem 1.5rem;
  }
  
  .feature-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }
  
  .feature-item {
    display: flex;
    align-items: center;
    font-weight: 500;
    color: #495057;
  }
  
  @media (max-width: 991px) {
    .booking-sidebar {
      position: static;
      margin-top: 3rem;
    }
    
    .property-title {
      font-size: 2rem;
    }
    
    .price-amount {
      font-size: 2rem;
    }
  }
  
  @media (max-width: 768px) {
    .main-image img,
    .placeholder-main-image {
      height: 250px;
    }
    
    .property-title {
      font-size: 1.75rem;
    }
    
    .price-info {
      padding: 1rem 1.5rem;
    }
  }
</style>

<script>
  // Calculate total price based on selected dates
  const checkInInput = document.querySelector('input[name="checkInDate"]');
  const checkOutInput = document.querySelector('input[name="checkOutDate"]');
  const totalPriceEl = document.getElementById('totalPrice');
  const pricePerNight = Number("<%= property.price %>");
  
  function calculateTotal() {
    if (checkInInput.value && checkOutInput.value) {
      const checkIn = new Date(checkInInput.value);
      const checkOut = new Date(checkOutInput.value);
      const timeDiff = checkOut.getTime() - checkIn.getTime();
      const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
      
      if (daysDiff > 0) {
        totalPriceEl.textContent = (daysDiff * pricePerNight).toLocaleString();
      }
    }
  }
  
  checkInInput.addEventListener('change', calculateTotal);
  checkOutInput.addEventListener('change', calculateTotal);
  
  // Set minimum date to today
  const today = new Date().toISOString().split('T')[0];
  checkInInput.min = today;
  checkOutInput.min = today;
  
  // Update checkout minimum when checkin changes
  checkInInput.addEventListener('change', function() {
    const selectedDate = new Date(this.value);
    selectedDate.setDate(selectedDate.getDate() + 1);
    checkOutInput.min = selectedDate.toISOString().split('T')[0];
  });
</script>